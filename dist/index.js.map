{"version":3,"file":"index.js","sources":["../src/utils/sameURL.ts","../src/appDir.tsx","../src/pagesDir.tsx"],"sourcesContent":["export function isSameURL(target: URL, current: URL) {\r\n  const cleanTarget = target.protocol + '//' + target.host + target.pathname;\r\n  const cleanCurrent =\r\n    current.protocol + '//' + current.host + current.pathname;\r\n\r\n  return cleanTarget === cleanCurrent;\r\n}\r\n","import React, { useEffect } from 'react';\r\nimport NProgress from 'nprogress';\r\nimport { isSameURL } from './utils/sameURL';\r\nimport {\r\n  usePathname,\r\n  useSearchParams,\r\n  useRouter as useNextRouter,\r\n} from 'next/navigation';\r\nimport { ProgressBarProps } from '.';\r\nimport { NavigateOptions } from 'next/dist/shared/lib/app-router-context';\r\n\r\ntype PushStateInput = [\r\n  data: any,\r\n  unused: string,\r\n  url?: string | URL | null | undefined,\r\n];\r\n\r\nexport const AppProgressBar = React.memo(\r\n  ({\r\n    color = '#0A2FFF',\r\n    height = '2px',\r\n    options,\r\n    shallowRouting = false,\r\n    delay = 0,\r\n    style,\r\n  }: ProgressBarProps) => {\r\n    const styles = (\r\n      <style>\r\n        {style ||\r\n          `\r\n          #nprogress {\r\n            pointer-events: none;\r\n          }\r\n          \r\n          #nprogress .bar {\r\n            background: ${color};\r\n          \r\n            position: fixed;\r\n            z-index: 1031;\r\n            top: 0;\r\n            left: 0;\r\n          \r\n            width: 100%;\r\n            height: ${height};\r\n          }\r\n          \r\n          /* Fancy blur effect */\r\n          #nprogress .peg {\r\n            display: block;\r\n            position: absolute;\r\n            right: 0px;\r\n            width: 100px;\r\n            height: 100%;\r\n            box-shadow: 0 0 10px ${color}, 0 0 5px ${color};\r\n            opacity: 1.0;\r\n          \r\n            -webkit-transform: rotate(3deg) translate(0px, -4px);\r\n                -ms-transform: rotate(3deg) translate(0px, -4px);\r\n                    transform: rotate(3deg) translate(0px, -4px);\r\n          }\r\n          \r\n          /* Remove these to get rid of the spinner */\r\n          #nprogress .spinner {\r\n            display: block;\r\n            position: fixed;\r\n            z-index: 1031;\r\n            top: 15px;\r\n            right: 15px;\r\n          }\r\n          \r\n          #nprogress .spinner-icon {\r\n            width: 18px;\r\n            height: 18px;\r\n            box-sizing: border-box;\r\n          \r\n            border: solid 2px transparent;\r\n            border-top-color: ${color};\r\n            border-left-color: ${color};\r\n            border-radius: 50%;\r\n          \r\n            -webkit-animation: nprogress-spinner 400ms linear infinite;\r\n                    animation: nprogress-spinner 400ms linear infinite;\r\n          }\r\n          \r\n          .nprogress-custom-parent {\r\n            overflow: hidden;\r\n            position: relative;\r\n          }\r\n          \r\n          .nprogress-custom-parent #nprogress .spinner,\r\n          .nprogress-custom-parent #nprogress .bar {\r\n            position: absolute;\r\n          }\r\n          \r\n          @-webkit-keyframes nprogress-spinner {\r\n            0%   { -webkit-transform: rotate(0deg); }\r\n            100% { -webkit-transform: rotate(360deg); }\r\n          }\r\n          @keyframes nprogress-spinner {\r\n            0%   { transform: rotate(0deg); }\r\n            100% { transform: rotate(360deg); }\r\n          }\r\n        `}\r\n      </style>\r\n    );\r\n\r\n    NProgress.configure(options || {});\r\n\r\n    const pathname = usePathname();\r\n    const searchParams = useSearchParams();\r\n\r\n    useEffect(() => {\r\n      NProgress.done();\r\n    }, [pathname, searchParams]);\r\n\r\n    useEffect(() => {\r\n      let timer: NodeJS.Timeout;\r\n\r\n      const startProgress = () => {\r\n        timer = setTimeout(NProgress.start, delay);\r\n      };\r\n\r\n      const stopProgress = () => {\r\n        clearTimeout(timer);\r\n        NProgress.done();\r\n      };\r\n\r\n      const handleAnchorClick = (event: MouseEvent) => {\r\n        const anchorElement = event.currentTarget as HTMLAnchorElement;\r\n\r\n        // Skip anchors with target=\"_blank\"\r\n        if (anchorElement.target === '_blank') return;\r\n\r\n        const targetUrl = new URL(anchorElement.href);\r\n        const currentUrl = new URL(location.href);\r\n\r\n        if (shallowRouting && isSameURL(targetUrl, currentUrl)) return;\r\n        if (targetUrl?.href === currentUrl?.href) return;\r\n\r\n        startProgress();\r\n      };\r\n\r\n      const handleMutation: MutationCallback = () => {\r\n        const anchorElements = document.querySelectorAll('a');\r\n        // Skip anchors with target=\"_blank\" and anchors without href\r\n        const validAnchorELes = Array.from(anchorElements).filter(\r\n          (anchor) => anchor.href && anchor.target !== '_blank',\r\n        );\r\n        validAnchorELes.forEach((anchor) =>\r\n          anchor.addEventListener('click', handleAnchorClick),\r\n        );\r\n      };\r\n\r\n      const mutationObserver = new MutationObserver(handleMutation);\r\n      mutationObserver.observe(document, { childList: true, subtree: true });\r\n\r\n      window.history.pushState = new Proxy(window.history.pushState, {\r\n        apply: (target, thisArg, argArray: PushStateInput) => {\r\n          stopProgress();\r\n          return target.apply(thisArg, argArray);\r\n        },\r\n      });\r\n    }, []);\r\n\r\n    return styles;\r\n  },\r\n  () => true,\r\n);\r\n\r\nexport function useRouter() {\r\n  const router = useNextRouter();\r\n\r\n  function push(href: string, options?: NavigateOptions) {\r\n    NProgress.start();\r\n    return router.push(href, options);\r\n  }\r\n\r\n  function back(options?: { showProgressBar?: boolean }) {\r\n    if (options?.showProgressBar) NProgress.start();\r\n    return router.back();\r\n  }\r\n  return { ...router, push, back };\r\n}\r\n","import React, { useEffect } from 'react';\r\nimport NProgress from 'nprogress';\r\nimport { isSameURL } from './utils/sameURL';\r\nimport Router from 'next/router';\r\nimport { ProgressBarProps } from '.';\r\n\r\nexport const PagesProgressBar = React.memo(\r\n  ({\r\n    color = '#0A2FFF',\r\n    height = '2px',\r\n    options,\r\n    shallowRouting = false,\r\n    delay = 0,\r\n    style,\r\n  }: ProgressBarProps) => {\r\n    const styles = (\r\n      <style>\r\n        {style ||\r\n          `\r\n          #nprogress {\r\n            pointer-events: none;\r\n          }\r\n          \r\n          #nprogress .bar {\r\n            background: ${color};\r\n          \r\n            position: fixed;\r\n            z-index: 1031;\r\n            top: 0;\r\n            left: 0;\r\n          \r\n            width: 100%;\r\n            height: ${height};\r\n          }\r\n          \r\n          /* Fancy blur effect */\r\n          #nprogress .peg {\r\n            display: block;\r\n            position: absolute;\r\n            right: 0px;\r\n            width: 100px;\r\n            height: 100%;\r\n            box-shadow: 0 0 10px ${color}, 0 0 5px ${color};\r\n            opacity: 1.0;\r\n          \r\n            -webkit-transform: rotate(3deg) translate(0px, -4px);\r\n                -ms-transform: rotate(3deg) translate(0px, -4px);\r\n                    transform: rotate(3deg) translate(0px, -4px);\r\n          }\r\n          \r\n          /* Remove these to get rid of the spinner */\r\n          #nprogress .spinner {\r\n            display: block;\r\n            position: fixed;\r\n            z-index: 1031;\r\n            top: 15px;\r\n            right: 15px;\r\n          }\r\n          \r\n          #nprogress .spinner-icon {\r\n            width: 18px;\r\n            height: 18px;\r\n            box-sizing: border-box;\r\n          \r\n            border: solid 2px transparent;\r\n            border-top-color: ${color};\r\n            border-left-color: ${color};\r\n            border-radius: 50%;\r\n          \r\n            -webkit-animation: nprogress-spinner 400ms linear infinite;\r\n                    animation: nprogress-spinner 400ms linear infinite;\r\n          }\r\n          \r\n          .nprogress-custom-parent {\r\n            overflow: hidden;\r\n            position: relative;\r\n          }\r\n          \r\n          .nprogress-custom-parent #nprogress .spinner,\r\n          .nprogress-custom-parent #nprogress .bar {\r\n            position: absolute;\r\n          }\r\n          \r\n          @-webkit-keyframes nprogress-spinner {\r\n            0%   { -webkit-transform: rotate(0deg); }\r\n            100% { -webkit-transform: rotate(360deg); }\r\n          }\r\n          @keyframes nprogress-spinner {\r\n            0%   { transform: rotate(0deg); }\r\n            100% { transform: rotate(360deg); }\r\n          }\r\n        `}\r\n      </style>\r\n    );\r\n\r\n    NProgress.configure(options || {});\r\n\r\n    useEffect(() => {\r\n      let timer: NodeJS.Timeout;\r\n\r\n      const startProgress = () => {\r\n        timer = setTimeout(NProgress.start, delay);\r\n      };\r\n\r\n      const stopProgress = () => {\r\n        clearTimeout(timer);\r\n        NProgress.done();\r\n      };\r\n\r\n      const handleRouteStart = (url: string) => {\r\n        const targetUrl = new URL(url, location.href);\r\n        const currentUrl = new URL(Router.route, location.href);\r\n\r\n        if (!shallowRouting || !isSameURL(targetUrl, currentUrl)) {\r\n          startProgress();\r\n        }\r\n      };\r\n      const handleRouteDone = () => stopProgress();\r\n\r\n      Router.events.on('routeChangeStart', handleRouteStart);\r\n      Router.events.on('routeChangeComplete', handleRouteDone);\r\n      Router.events.on('routeChangeError', handleRouteDone);\r\n\r\n      return () => {\r\n        // Make sure to remove the event handler on unmount!\r\n        Router.events.off('routeChangeStart', handleRouteStart);\r\n        Router.events.off('routeChangeComplete', handleRouteDone);\r\n        Router.events.off('routeChangeError', handleRouteDone);\r\n      };\r\n    }, []);\r\n\r\n    return styles;\r\n  },\r\n  () => true,\r\n);\r\n"],"names":["usePathname","useSearchParams","useEffect","useNextRouter"],"mappings":"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"}